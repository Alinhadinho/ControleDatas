# ==========================================
# üß± Render.com Blueprint - Coletor App
# Projeto: ControleDatas / coletorApp
# Tipo: Aplica√ß√£o Flet com Docker
# Persist√™ncia: Banco + Relat√≥rios
# ==========================================

services:
  - type: web
    name: coletor-app
    env: docker
    region: oregon  # altere para 'frankfurt' se quiser servidor europeu

    # Caminhos relativos √† raiz do reposit√≥rio
    dockerfilePath: ./coletorApp/Dockerfile
    dockerContext: ./coletorApp

    # Vari√°veis de ambiente (Render define PORT automaticamente)
    envVars:
      - key: PORT
        value: 8080
      - key: FLET_DISPLAY
        value: false

    # Caminho de health check (opcional, se adicionado no main.py)
    healthCheckPath: /healthz

    # Persist√™ncia de dados (mant√©m o DB e relat√≥rios entre deploys)
    disks:
      - name: coletor-data
        mountPath: /app/data
        sizeGB: 1
      - name: coletor-reports
        mountPath: /app/reports
        sizeGB: 1

    # Deploy autom√°tico a cada commit
    autoDeploy: true

    # Plano gratuito (altere para 'starter' se precisar de mais CPU/RAM)
    plan: free
